  {{ $.Scratch.Set "path" (print "/" .File.Path)  }}
<nav id="menu" class="mm-wrapper_sidebar-opened">
    <div id="panel-menu">
        <ul>
            {{ $currentPage := . }}
            {{ range .Site.Menus.main }}
                {{if .HasChildren}}
                <li>
                    <span>
                        <a href="{{ .URL }}">
                            <i class="{{ .Pre }}" aria-hidden="true"></i>
                            {{ .Name }}
                        </a>
                    </span>
                    <ul>
                        {{range .Children}}
                        <li {{if in ($.Scratch.Get "path") .URL }}class="Selected"{{end}}><a href="{{ .URL }}">{{ .Name }}</a></li>
                        {{end}}
                    </ul>
                </li>
                {{else}}
                    <li><a href="{{ .URL }}"><i class="{{ .Pre }}" aria-hidden="true"></i>{{ .Name }}</a></li>
                {{end}}
            {{ end }}
        </ul>    
    </div>
</nav>

<!-- Fire the plugin -->
<script>

    let menu = new Mmenu('#menu',
        {
            extensions: [
                'theme-white',
                'pagedim-black'
            ],
            iconPanels: {
                    add: !0,
                    blockPanel: false,
                    hideDivider: true,
                    hideNavbar: true,
                    visible: "first"
            },
            setSelected: {
                    hover: !0,
                    parent: !0
                },
            counters: false,
            sidebar: {
                    collapsed: "(min-width: 350px)",
                    expanded: "(min-width: 720px)"
                },
            navbars: [
                {
                    "position": "top",
                    "content": [
                        '<a class="navbar-brand" href="/"><img width="300" src="/logo/MSP-Docs_logo.svg"></a>'
                    ]
                }
                ,
                {
                    position: "top",
                    content: [
                        "searchfield"
                    ]
                },
                {
                    content: ['prev', 'breadcrumbs']
                },
                {
                    position: 'bottom',
                    content: ['<div class="menu-buttons"><a href="https://www.multisafepay.com/contact" class="outline bg-white text-dark" >Contact</a><a href="https://www.multisafepay.com/login/" class="primary text-white">Sign up</a></div>']
                },
            ],
            searchfield: {
                showTextItems: true,
                placeholder: "Search documentation..."
		    }
        },
        {
            navbars: {
                breadcrumbs: {
                    removeFirst: true
                }
            }
        }
    ).API;

window.onload = () => {
    let t = $("#hamburger").children(".mburger");
    menu.bind("close:finish", function() {
            setTimeout(function() {
                t.attr("href", "#menu")
                }, 100)
            }),
    menu.bind("open:finish", function() {
        setTimeout(function() {
            t.attr("href", "#page")
        }, 100)
    })
};
</script>